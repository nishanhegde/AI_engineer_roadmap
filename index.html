<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Engineer Roadmap â€” Progress Tracker</title>
  <style>
    /* â”€â”€â”€ Reset & Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:       #0f1117;
      --bg2:      #1a1d27;
      --bg3:      #242736;
      --border:   #2e3248;
      --text:     #e2e4f0;
      --muted:    #7c82a0;
      --accent:   #6366f1;
      --accent2:  #8b5cf6;
      --success:  #10b981;
      --warning:  #f59e0b;
      --danger:   #ef4444;
      --pink:     #ec4899;
      --radius:   10px;
      --sidebar:  280px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      font-size: 14px;
      line-height: 1.5;
    }

    /* â”€â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    * {
      scrollbar-width: thin;
      scrollbar-color: var(--border) transparent;
    }

    ::-webkit-scrollbar { width: 5px; height: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 99px;
    }
    ::-webkit-scrollbar-thumb:hover { background: #444; }
    ::-webkit-scrollbar-corner { background: transparent; }

    /* â”€â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .layout { display: flex; min-height: 100vh; }

    /* â”€â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar {
      width: var(--sidebar);
      min-width: var(--sidebar);
      background: var(--bg2);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      position: sticky;
      top: 0;
      height: 100vh;
    }

    .sidebar-header {
      padding: 20px 16px 12px;
      border-bottom: 1px solid var(--border);
    }

    .sidebar-header h1 {
      font-size: 13px;
      font-weight: 700;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .sidebar-header p {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    /* Stats panel */
    .stats-panel {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .stat-label { font-size: 11px; color: var(--muted); }

    .stat-value {
      font-size: 13px;
      font-weight: 700;
      color: var(--text);
    }

    .stat-value.accent { color: var(--accent); }
    .stat-value.success { color: var(--success); }
    .stat-value.warning { color: var(--warning); }

    .progress-bar {
      height: 5px;
      background: var(--bg3);
      border-radius: 99px;
      overflow: hidden;
      margin-top: 4px;
    }

    .progress-fill {
      height: 100%;
      border-radius: 99px;
      background: var(--accent);
      transition: width 0.4s ease;
    }

    .streak-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: linear-gradient(135deg, #f59e0b22, #ef444422);
      border: 1px solid #f59e0b44;
      border-radius: 99px;
      padding: 3px 10px;
      font-size: 12px;
      font-weight: 700;
      color: var(--warning);
    }

    /* Month nav */
    .nav-section {
      padding: 10px 10px 0;
      flex: 1;
    }

    .nav-section-title {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--muted);
      padding: 6px 6px 4px;
    }

    .month-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
      padding: 9px 10px;
      border-radius: 8px;
      border: none;
      background: transparent;
      color: var(--text);
      cursor: pointer;
      text-align: left;
      transition: background 0.15s;
      margin-bottom: 2px;
    }

    .month-btn:hover { background: var(--bg3); }
    .month-btn.active { background: var(--bg3); }

    .month-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .month-info { flex: 1; min-width: 0; }
    .month-name { font-size: 12px; font-weight: 600; }
    .month-prog { font-size: 10px; color: var(--muted); }

    .month-pct {
      font-size: 11px;
      font-weight: 700;
      color: var(--muted);
      min-width: 32px;
      text-align: right;
    }

    /* Sidebar actions */
    .sidebar-actions {
      padding: 12px;
      border-top: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .btn-sm {
      padding: 7px 12px;
      border-radius: 7px;
      border: 1px solid var(--border);
      background: var(--bg3);
      color: var(--muted);
      font-size: 11px;
      cursor: pointer;
      transition: all 0.15s;
      text-align: center;
    }

    .btn-sm:hover { border-color: var(--accent); color: var(--accent); }

    .btn-primary {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
      font-weight: 600;
    }

    .btn-primary:hover { background: #5558e3; border-color: #5558e3; color: white; }

    /* â”€â”€â”€ Main Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .main {
      flex: 1;
      overflow-y: auto;
      min-width: 0;
    }

    .main-header {
      padding: 24px 28px 0;
      border-bottom: 1px solid var(--border);
      padding-bottom: 16px;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    .month-title { font-size: 22px; font-weight: 700; }
    .month-subtitle { font-size: 13px; color: var(--muted); margin-top: 3px; }

    .project-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 12px;
      border-radius: 99px;
      font-size: 12px;
      font-weight: 600;
      border: 1px solid;
      margin-top: 8px;
    }

    /* â”€â”€â”€ Calendar Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .calendar-section {
      padding: 20px 28px;
    }

    .calendar-section h3 {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      font-weight: 700;
      margin-bottom: 12px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }

    .week-label {
      grid-column: 1 / -1;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      font-weight: 700;
      padding: 6px 0 2px;
      border-top: 1px solid var(--border);
      margin-top: 4px;
    }

    .week-label:first-child { border-top: none; margin-top: 0; }

    .day-card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      transition: all 0.15s;
      position: relative;
    }

    .day-card:hover { border-color: var(--accent); transform: translateY(-1px); }
    .day-card.active { border-color: var(--accent); box-shadow: 0 0 0 1px var(--accent); }

    .day-card.completed {
      background: #10b98110;
      border-color: #10b98140;
    }

    .day-card.partial {
      background: #f59e0b08;
      border-color: #f59e0b30;
    }

    .day-num {
      font-size: 10px;
      color: var(--muted);
      font-weight: 700;
      margin-bottom: 3px;
    }

    .day-card-title {
      font-size: 11px;
      font-weight: 600;
      line-height: 1.3;
      color: var(--text);
    }

    .day-time {
      font-size: 10px;
      color: var(--muted);
      margin-top: 5px;
    }

    .day-progress-dots {
      display: flex;
      gap: 3px;
      margin-top: 7px;
      flex-wrap: wrap;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--border);
    }

    .dot.done { background: var(--success); }

    .completed-check {
      position: absolute;
      top: 6px;
      right: 7px;
      font-size: 12px;
      color: var(--success);
    }

    /* â”€â”€â”€ Day Detail Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .day-panel {
      padding: 20px 28px;
      border-top: 1px solid var(--border);
    }

    .day-panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .day-panel-title { font-size: 18px; font-weight: 700; }
    .day-panel-meta { font-size: 12px; color: var(--muted); margin-top: 2px; }

    .close-panel {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 18px;
      padding: 4px;
      line-height: 1;
    }

    .close-panel:hover { color: var(--text); }

    /* Tasks */
    .tasks-list { margin-bottom: 20px; }

    .task-item {
      border-radius: 8px;
      border: 1px solid transparent;
      margin-bottom: 6px;
      transition: all 0.15s;
    }

    .task-header {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px 12px;
      cursor: pointer;
      border-radius: 8px;
    }

    .task-item:hover { background: var(--bg3); border-color: var(--border); }

    .task-item.checked {
      background: #10b98108;
      border-color: #10b98130;
    }

    .task-checkbox {
      width: 18px;
      height: 18px;
      border-radius: 5px;
      border: 2px solid var(--border);
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.15s;
      margin-top: 1px;
    }

    .task-item.checked .task-checkbox {
      background: var(--success);
      border-color: var(--success);
    }

    .task-item.checked .task-checkbox::after {
      content: 'âœ“';
      font-size: 11px;
      color: white;
      font-weight: 700;
    }

    .task-text {
      flex: 1;
      font-size: 13px;
      color: var(--text);
    }

    .task-item.checked .task-text {
      text-decoration: line-through;
      color: var(--muted);
    }

    /* Task steps */
    .steps-toggle {
      background: none;
      border: none;
      color: var(--accent);
      font-size: 11px;
      cursor: pointer;
      padding: 0 12px 8px 42px;
      display: block;
      opacity: 0.75;
      letter-spacing: 0.02em;
    }

    .steps-toggle:hover { opacity: 1; text-decoration: underline; }

    .task-steps {
      margin: 4px 12px 10px 42px;
      border-left: 2px solid var(--border);
      padding-left: 14px;
    }

    .task-step {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      margin-bottom: 10px;
      font-size: 12px;
      color: var(--text2);
      line-height: 1.5;
    }

    .step-num {
      background: var(--accent);
      color: white;
      min-width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: 700;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .step-text { flex: 1; }

    .step-text code {
      font-family: 'Courier New', monospace;
      background: var(--bg3);
      color: #a78bfa;
      padding: 1px 5px;
      border-radius: 3px;
      font-size: 11px;
    }

    /* Resources */
    .resources-section { margin-bottom: 20px; }

    .section-title {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .resource-link {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 5px 10px;
      border-radius: 6px;
      border: 1px solid var(--border);
      color: var(--accent);
      text-decoration: none;
      font-size: 12px;
      margin: 0 6px 6px 0;
      transition: all 0.15s;
    }

    .resource-link:hover {
      background: var(--bg3);
      border-color: var(--accent);
    }

    /* Notes */
    .notes-section { margin-bottom: 20px; }

    .notes-textarea {
      width: 100%;
      min-height: 100px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-family: inherit;
      font-size: 13px;
      padding: 10px 12px;
      resize: vertical;
      transition: border-color 0.15s;
      outline: none;
    }

    .notes-textarea:focus { border-color: var(--accent); }
    .notes-textarea::placeholder { color: var(--muted); }

    /* â”€â”€â”€ What's Next Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .whats-next {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin: 0 28px 20px;
    }

    .whats-next-title {
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      margin-bottom: 12px;
    }

    .next-day-card {
      display: flex;
      gap: 12px;
      align-items: flex-start;
    }

    .next-day-num {
      font-size: 28px;
      font-weight: 800;
      color: var(--accent);
      line-height: 1;
      min-width: 48px;
    }

    .next-day-info { flex: 1; }
    .next-day-title { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
    .next-day-tasks { font-size: 12px; color: var(--muted); }

    /* â”€â”€â”€ Loading State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .loading-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 16px;
      color: var(--muted);
    }

    .spinner {
      width: 36px;
      height: 36px;
      border: 3px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .loading-hint {
      font-size: 12px;
      color: var(--muted);
      text-align: center;
      max-width: 300px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 12px 16px;
      margin-top: 8px;
    }

    .loading-hint code {
      background: var(--bg3);
      padding: 1px 5px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 11px;
      color: var(--accent);
    }

    /* â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: #000000a0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 20px;
    }

    .modal {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      max-width: 480px;
      width: 100%;
    }

    .modal h2 { font-size: 16px; margin-bottom: 12px; }
    .modal p { font-size: 13px; color: var(--muted); margin-bottom: 16px; }

    .modal textarea {
      width: 100%;
      height: 180px;
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-family: monospace;
      font-size: 11px;
      padding: 10px;
      resize: none;
      outline: none;
      margin-bottom: 12px;
    }

    .modal-actions { display: flex; gap: 8px; justify-content: flex-end; }

    /* â”€â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hamburger {
      display: none;
      background: none;
      border: none;
      color: var(--text);
      cursor: pointer;
      font-size: 20px;
      padding: 4px 8px;
    }

    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: 0; top: 0; bottom: 0;
        z-index: 50;
        transform: translateX(-100%);
        transition: transform 0.25s ease;
      }

      .sidebar.open { transform: translateX(0); }

      .hamburger { display: block; }

      .main-header { flex-direction: column; }

      .calendar-grid { grid-template-columns: repeat(3, 1fr); }

      .calendar-section, .day-panel, .whats-next { padding-left: 16px; padding-right: 16px; }

      .main-header { padding: 16px; }

      .whats-next { margin: 0 16px 16px; }
    }

    /* â”€â”€â”€ Misc utilities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hidden { display: none !important; }
    .flex { display: flex; }
    .gap-2 { gap: 8px; }
    .items-center { align-items: center; }
    .text-muted { color: var(--muted); }
    .font-mono { font-family: monospace; }

    /* Profile section */
    .profile-section {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }

    .profile-row {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-top: 6px;
    }

    .profile-select {
      flex: 1;
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 6px;
      padding: 5px 8px;
      font-size: 12px;
      cursor: pointer;
    }

    .profile-select:focus { outline: none; border-color: var(--accent); }

    .new-profile-row {
      display: none;
      gap: 6px;
      margin-top: 8px;
    }

    .profile-input {
      flex: 1;
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 6px;
      padding: 5px 8px;
      font-size: 12px;
    }

    .profile-input:focus { outline: none; border-color: var(--accent); }

    .profile-status {
      font-size: 11px;
      color: var(--success);
      margin-top: 5px;
      min-height: 14px;
    }

    .overall-bar {
      height: 8px;
      background: var(--bg3);
      border-radius: 99px;
      overflow: hidden;
      margin-top: 6px;
    }

    .overall-fill {
      height: 100%;
      border-radius: 99px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      transition: width 0.5s ease;
    }

    .mobile-header {
      display: none;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      background: var(--bg2);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    @media (max-width: 768px) {
      .mobile-header { display: flex; }
    }

    .mobile-header-title {
      font-size: 13px;
      font-weight: 700;
      color: var(--accent);
    }
  </style>
</head>
<body>

<!-- Loading Screen -->
<div id="loading" class="loading-screen">
  <div class="spinner"></div>
  <div>Loading roadmap dataâ€¦</div>
  <div class="loading-hint">
    If this doesn't load, serve from a local server:<br><br>
    <code>python3 server.py</code><br>
    then open <code>http://localhost:7001</code>
  </div>
</div>

<!-- Main App (hidden until data loads) -->
<div id="app" class="layout hidden">

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h1>AI Engineer Roadmap</h1>
      <p id="sb-meta">120 days Â· 1-2 hrs/day</p>
    </div>

    <!-- Stats -->
    <div class="stats-panel">
      <div class="stat-row">
        <span class="stat-label">Overall Progress</span>
        <span class="stat-value accent" id="overall-pct">0%</span>
      </div>
      <div class="overall-bar">
        <div class="overall-fill" id="overall-fill" style="width:0%"></div>
      </div>

      <div class="stat-row" style="margin-top:12px">
        <span class="stat-label">Tasks Completed</span>
        <span class="stat-value" id="tasks-done">0 / 0</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Days Finished</span>
        <span class="stat-value success" id="days-done">0</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Current Streak</span>
        <span class="streak-badge" id="streak-badge">ğŸ”¥ 0 days</span>
      </div>
    </div>

    <!-- Profile -->
    <div class="profile-section">
      <div class="nav-section-title">PROFILE</div>
      <div class="profile-row">
        <select id="profile-select" class="profile-select" onchange="selectProfile(this.value)">
          <option value="">â€” no profile â€”</option>
        </select>
        <button class="btn-sm btn-primary" style="flex-shrink:0;padding:5px 10px" onclick="showNewProfile()">+</button>
      </div>
      <div id="new-profile-row" class="new-profile-row">
        <input id="profile-name-input" class="profile-input" type="text" placeholder="Your nameâ€¦" maxlength="30"
          onkeydown="if(event.key==='Enter')createProfile()">
        <button class="btn-sm btn-primary" onclick="createProfile()">Create</button>
      </div>
      <div id="profile-status" class="profile-status"></div>
    </div>

    <!-- Month Navigation -->
    <div class="nav-section" id="month-nav">
      <div class="nav-section-title">Months</div>
      <!-- injected by JS -->
    </div>

    <!-- Actions -->
    <div class="sidebar-actions">
      <button class="btn-sm btn-primary" onclick="exportProgress()">â¬‡ Export Progress</button>
      <button class="btn-sm" onclick="showImportModal()">â¬† Import Progress</button>
      <button class="btn-sm" onclick="resetConfirm()" style="color:var(--danger)">âš  Reset All</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main" id="main-content">
    <!-- Mobile header -->
    <div class="mobile-header">
      <button class="hamburger" onclick="toggleSidebar()">â˜°</button>
      <span class="mobile-header-title">AI Engineer Roadmap</span>
    </div>

    <!-- Month Header -->
    <div class="main-header" id="month-header">
      <div>
        <div class="month-title" id="month-title">Loadingâ€¦</div>
        <div class="month-subtitle" id="month-subtitle"></div>
        <div id="project-badge"></div>
      </div>
      <div style="text-align:right; min-width:120px">
        <div style="font-size:11px;color:var(--muted);margin-bottom:4px">Month Progress</div>
        <div style="font-size:22px;font-weight:800;color:var(--accent)" id="month-pct-big">0%</div>
        <div class="progress-bar" style="width:120px;height:6px;margin-top:4px">
          <div class="progress-fill" id="month-fill-big" style="width:0%"></div>
        </div>
      </div>
    </div>

    <!-- What's Next -->
    <div class="whats-next" id="whats-next-panel">
      <div class="whats-next-title">âš¡ What's Next</div>
      <div id="whats-next-content"></div>
    </div>

    <!-- Calendar -->
    <div class="calendar-section">
      <h3>DAILY CALENDAR</h3>
      <div class="calendar-grid" id="calendar-grid"></div>
    </div>

    <!-- Day Detail Panel -->
    <div class="day-panel hidden" id="day-panel">
      <div class="day-panel-header">
        <div>
          <div class="day-panel-title" id="dp-title"></div>
          <div class="day-panel-meta" id="dp-meta"></div>
        </div>
        <button class="close-panel" onclick="closePanel()">âœ•</button>
      </div>

      <!-- Progress for day -->
      <div style="margin-bottom:16px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
          <span style="font-size:11px;color:var(--muted)">DAY PROGRESS</span>
          <span style="font-size:13px;font-weight:700;color:var(--accent)" id="dp-pct">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="dp-fill" style="width:0%"></div>
        </div>
      </div>

      <div class="tasks-list" id="dp-tasks"></div>

      <div class="resources-section">
        <div class="section-title">Resources</div>
        <div id="dp-resources"></div>
      </div>

      <div class="notes-section">
        <div class="section-title">Notes</div>
        <textarea
          class="notes-textarea"
          id="dp-notes"
          placeholder="Add your notes, reflections, or links for this dayâ€¦"
          oninput="saveNote()"
        ></textarea>
      </div>

      <div style="display:flex;gap:8px">
        <button class="btn-sm btn-primary" onclick="markDayComplete()">âœ“ Mark All Complete</button>
        <button class="btn-sm" onclick="clearDay()">âœ• Clear Day</button>
      </div>
    </div>
  </main>
</div>

<!-- Import Modal -->
<div class="modal-overlay hidden" id="import-modal">
  <div class="modal">
    <h2>Import Progress</h2>
    <p>Paste your exported JSON below. This will overwrite your current progress.</p>
    <textarea id="import-text" placeholder='{"version":1,"tasks":{},"notes":{}}'></textarea>
    <div class="modal-actions">
      <button class="btn-sm" onclick="closeImportModal()">Cancel</button>
      <button class="btn-sm btn-primary" onclick="importProgress()">Import</button>
    </div>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// State
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STORAGE_KEY = 'ai_roadmap_progress';
const PROFILE_KEY  = 'ai_roadmap_active_profile';
let roadmap = null;
let activeMonth = 1;
let activeDay = null;
let activeProfile = null;
let progress = { version: 1, tasks: {}, notes: {}, lastUpdated: null };

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Boot
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function init() {
  loadProgress();
  try {
    const res = await fetch('daily_tasks.json');
    if (!res.ok) throw new Error(res.statusText);
    roadmap = await res.json();
    document.getElementById('loading').classList.add('hidden');
    document.getElementById('app').classList.remove('hidden');
    await loadProfiles();
    buildSidebar();
    renderMonth(activeMonth);
  } catch (e) {
    document.getElementById('loading').innerHTML = `
      <div style="color:var(--danger);font-weight:700;font-size:16px">Failed to load daily_tasks.json</div>
      <div class="loading-hint">
        Run a local server from the roadmap folder:<br><br>
        <code>python3 server.py</code><br><br>
        Then open: <code>http://localhost:7001</code>
      </div>`;
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Progress persistence
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadProgress() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) progress = JSON.parse(raw);
  } catch {}
}

function saveProgress() {
  progress.lastUpdated = new Date().toISOString();
  localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
  saveToFile();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Profile management
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadProfiles() {
  try {
    const res = await fetch('/api/profiles');
    if (!res.ok) return;
    const profiles = await res.json();
    const select = document.getElementById('profile-select');
    select.innerHTML = '<option value="">â€” no profile â€”</option>';
    profiles.forEach(name => {
      const opt = document.createElement('option');
      opt.value = name;
      opt.textContent = name;
      select.appendChild(opt);
    });
    const last = localStorage.getItem(PROFILE_KEY);
    if (last && profiles.includes(last)) {
      select.value = last;
      await selectProfile(last, false);
    }
  } catch {}
}

async function selectProfile(name, rerender = true) {
  if (!name) {
    activeProfile = null;
    localStorage.removeItem(PROFILE_KEY);
    setProfileStatus('');
    return;
  }
  activeProfile = name;
  localStorage.setItem(PROFILE_KEY, name);
  try {
    const res = await fetch(`/api/profile/${encodeURIComponent(name)}`);
    if (res.ok) {
      const data = await res.json();
      if (data.version) {
        progress = data;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
        if (rerender && roadmap) {
          updateGlobalStats();
          renderMonth(activeMonth);
          if (activeDay) {
            const month = roadmap.months.find(m => m.id === activeMonth);
            const day = month?.weeks.flatMap(w => w.days).find(d => d.day === activeDay);
            if (day) renderDayTasks(month, day);
          }
        }
      }
    }
    setProfileStatus(`âœ“ ${name}`);
  } catch {
    setProfileStatus('');
  }
}

async function createProfile() {
  const input = document.getElementById('profile-name-input');
  const name = input.value.trim();
  if (!name) return;
  const select = document.getElementById('profile-select');
  if (!Array.from(select.options).some(o => o.value === name)) {
    const opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    select.appendChild(opt);
  }
  select.value = name;
  activeProfile = name;
  localStorage.setItem(PROFILE_KEY, name);
  await saveToFile();
  input.value = '';
  document.getElementById('new-profile-row').style.display = 'none';
  setProfileStatus(`âœ“ ${name}`);
}

function showNewProfile() {
  const row = document.getElementById('new-profile-row');
  const open = row.style.display === 'flex';
  row.style.display = open ? 'none' : 'flex';
  if (!open) document.getElementById('profile-name-input').focus();
}

async function saveToFile() {
  if (!activeProfile) return;
  try {
    await fetch(`/api/profile/${encodeURIComponent(activeProfile)}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(progress)
    });
  } catch {}
}

function setProfileStatus(msg) {
  const el = document.getElementById('profile-status');
  if (el) el.textContent = msg;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Stats calculation
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getAllDays() {
  if (!roadmap) return [];
  return roadmap.months.flatMap(m => m.weeks.flatMap(w => w.days));
}

function getDayKey(monthId, dayNum) {
  return `m${monthId}_d${dayNum}`;
}

function getDayProgress(monthId, dayNum) {
  const key = getDayKey(monthId, dayNum);
  return progress.tasks[key] || {};
}

function getDayCompletionCount(day, monthId) {
  const saved = getDayProgress(monthId, day.day);
  return day.tasks.filter((_, i) => saved[i]).length;
}

function isDayComplete(day, monthId) {
  return getDayCompletionCount(day, monthId) === day.tasks.length;
}

function isDayPartial(day, monthId) {
  const count = getDayCompletionCount(day, monthId);
  return count > 0 && count < day.tasks.length;
}

function calcMonthStats(month) {
  let total = 0, done = 0;
  month.weeks.forEach(w => w.days.forEach(d => {
    total += d.tasks.length;
    done += getDayCompletionCount(d, month.id);
  }));
  return { total, done, pct: total ? Math.round(done / total * 100) : 0 };
}

function calcOverallStats() {
  if (!roadmap) return { total: 0, done: 0, days: 0, completeDays: 0 };
  let total = 0, done = 0, days = 0, completeDays = 0;
  roadmap.months.forEach(m => {
    m.weeks.forEach(w => w.days.forEach(d => {
      total += d.tasks.length;
      const c = getDayCompletionCount(d, m.id);
      done += c;
      days++;
      if (c === d.tasks.length) completeDays++;
    }));
  });
  return { total, done, days, completeDays, pct: total ? Math.round(done / total * 100) : 0 };
}

function calcStreak() {
  if (!roadmap) return 0;
  // Find the last consecutively completed set of days (order by day number)
  const allDays = [];
  roadmap.months.forEach(m => {
    m.weeks.forEach(w => w.days.forEach(d => {
      allDays.push({ monthId: m.id, day: d });
    }));
  });

  let streak = 0;
  // Walk backwards from the last completed day
  for (let i = allDays.length - 1; i >= 0; i--) {
    const { monthId, day } = allDays[i];
    if (isDayComplete(day, monthId)) streak++;
    else if (streak > 0) break; // broken streak
  }
  return streak;
}

function findNextDay() {
  if (!roadmap) return null;
  for (const m of roadmap.months) {
    for (const w of m.weeks) {
      for (const d of w.days) {
        if (!isDayComplete(d, m.id)) return { month: m, day: d };
      }
    }
  }
  return null; // all done!
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Sidebar rendering
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildSidebar() {
  updateGlobalStats();
  const nav = document.getElementById('month-nav');
  let html = '<div class="nav-section-title">Months</div>';
  roadmap.months.forEach(m => {
    const stats = calcMonthStats(m);
    html += `
      <button class="month-btn ${m.id === activeMonth ? 'active' : ''}" onclick="selectMonth(${m.id})" id="nav-m${m.id}">
        <span class="month-dot" style="background:${m.color}"></span>
        <span class="month-info">
          <span class="month-name">Month ${m.id}: ${m.title}</span>
          <span class="month-prog">${m.project.name}</span>
        </span>
        <span class="month-pct">${stats.pct}%</span>
      </button>`;
  });
  nav.innerHTML = html;
}

function updateGlobalStats() {
  const s = calcOverallStats();
  const streak = calcStreak();
  document.getElementById('overall-pct').textContent = s.pct + '%';
  document.getElementById('overall-fill').style.width = s.pct + '%';
  document.getElementById('tasks-done').textContent = `${s.done} / ${s.total}`;
  document.getElementById('days-done').textContent = s.completeDays;
  document.getElementById('streak-badge').textContent = `ğŸ”¥ ${streak} day${streak !== 1 ? 's' : ''}`;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Month rendering
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectMonth(id) {
  activeMonth = id;
  activeDay = null;
  document.getElementById('day-panel').classList.add('hidden');
  renderMonth(id);
  // Update nav active state
  document.querySelectorAll('.month-btn').forEach(b => b.classList.remove('active'));
  const btn = document.getElementById('nav-m' + id);
  if (btn) btn.classList.add('active');
  // Close mobile sidebar
  document.getElementById('sidebar').classList.remove('open');
}

function renderMonth(id) {
  const month = roadmap.months.find(m => m.id === id);
  if (!month) return;

  const stats = calcMonthStats(month);

  // Header
  document.getElementById('month-title').textContent = `Month ${month.id}: ${month.title}`;
  document.getElementById('month-subtitle').textContent = month.weeks.map(w => w.title).join(' Â· ');
  document.getElementById('month-pct-big').textContent = stats.pct + '%';
  document.getElementById('month-fill-big').style.width = stats.pct + '%';
  document.getElementById('month-fill-big').style.background = month.color;

  // Project badge
  document.getElementById('project-badge').innerHTML = `
    <span class="project-badge" style="color:${month.color};border-color:${month.color}40;background:${month.color}10">
      ğŸš€ ${month.project.name}
    </span>`;

  // What's Next
  renderWhatsNext();

  // Calendar
  const grid = document.getElementById('calendar-grid');
  let html = '';
  month.weeks.forEach(week => {
    html += `<div class="week-label" style="color:${month.color}">Week ${week.weekNumber}: ${week.title}</div>`;
    week.days.forEach(day => {
      const complete = isDayComplete(day, month.id);
      const partial = isDayPartial(day, month.id);
      const doneCount = getDayCompletionCount(day, month.id);
      const cls = complete ? 'completed' : partial ? 'partial' : '';
      const isActive = activeDay === day.day;

      const dots = day.tasks.map((_, i) => {
        const saved = getDayProgress(month.id, day.day);
        return `<span class="dot ${saved[i] ? 'done' : ''}"></span>`;
      }).join('');

      html += `
        <div class="day-card ${cls} ${isActive ? 'active' : ''}" onclick="selectDay(${month.id}, ${day.day})" id="dc-${month.id}-${day.day}">
          ${complete ? '<span class="completed-check">âœ“</span>' : ''}
          <div class="day-num">Day ${day.day}</div>
          <div class="day-card-title">${day.title}</div>
          <div class="day-time">â± ${day.timeEstimate}</div>
          <div class="day-progress-dots">${dots}</div>
        </div>`;
    });
  });
  grid.innerHTML = html;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// What's Next Panel
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderWhatsNext() {
  const next = findNextDay();
  const panel = document.getElementById('whats-next-content');
  if (!next) {
    panel.innerHTML = '<div style="color:var(--success);font-weight:700">ğŸ‰ Congratulations! You\'ve completed all 120 days!</div>';
    return;
  }
  const { month, day } = next;
  panel.innerHTML = `
    <div class="next-day-card">
      <div class="next-day-num">${day.day}</div>
      <div class="next-day-info">
        <div class="next-day-title">${day.title}</div>
        <div class="next-day-tasks">${day.tasks.length} tasks Â· ${day.timeEstimate} Â· ${month.title}</div>
        <div style="margin-top:8px">
          <button class="btn-sm btn-primary" style="font-size:11px;padding:5px 12px" onclick="selectMonth(${month.id});setTimeout(()=>selectDay(${month.id},${day.day}),100)">
            Start Day ${day.day} â†’
          </button>
        </div>
      </div>
    </div>`;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Day detail panel
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectDay(monthId, dayNum) {
  const month = roadmap.months.find(m => m.id === monthId);
  if (!month) return;
  const day = month.weeks.flatMap(w => w.days).find(d => d.day === dayNum);
  if (!day) return;

  activeDay = dayNum;

  // Update card active state
  document.querySelectorAll('.day-card').forEach(c => c.classList.remove('active'));
  const card = document.getElementById(`dc-${monthId}-${dayNum}`);
  if (card) card.classList.add('active');

  // Populate panel
  document.getElementById('dp-title').textContent = `Day ${day.day}: ${day.title}`;
  document.getElementById('dp-meta').textContent = `${month.title} Â· Week ${month.weeks.find(w => w.days.some(d => d.day === dayNum))?.weekNumber} Â· ${day.timeEstimate}`;

  renderDayTasks(month, day);
  renderDayResources(day);

  // Notes
  const noteKey = getDayKey(monthId, dayNum);
  document.getElementById('dp-notes').value = progress.notes[noteKey] || '';

  document.getElementById('day-panel').classList.remove('hidden');
  document.getElementById('day-panel').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function renderDayTasks(month, day) {
  const saved = getDayProgress(month.id, day.day);
  const done = Object.values(saved).filter(Boolean).length;
  const pct = day.tasks.length ? Math.round(done / day.tasks.length * 100) : 0;

  document.getElementById('dp-pct').textContent = pct + '%';
  document.getElementById('dp-fill').style.width = pct + '%';
  document.getElementById('dp-fill').style.background = pct === 100 ? 'var(--success)' : 'var(--accent)';

  const list = document.getElementById('dp-tasks');
  list.innerHTML = day.tasks.map((task, i) => {
    const isObj = typeof task === 'object' && task !== null;
    const title = isObj ? task.title : task;
    const steps = isObj && task.steps ? task.steps : null;

    const stepsHtml = steps ? `
      <button class="steps-toggle" onclick="event.stopPropagation();toggleSteps(${i})">â–¶ How to do this</button>
      <div class="task-steps" id="steps-${i}" style="display:none">
        ${steps.map((s, si) => `
          <div class="task-step">
            <span class="step-num">${si + 1}</span>
            <span class="step-text">${s.replace(/`([^`]+)`/g, '<code>$1</code>')}</span>
          </div>`).join('')}
      </div>` : '';

    return `
      <div class="task-item ${saved[i] ? 'checked' : ''}" id="ti-${i}">
        <div class="task-header" onclick="toggleTask(${month.id}, ${day.day}, ${i})">
          <span class="task-checkbox"></span>
          <span class="task-text">${title}</span>
        </div>
        ${stepsHtml}
      </div>`;
  }).join('');
}

function renderDayResources(day) {
  const res = document.getElementById('dp-resources');
  if (!day.resources || !day.resources.length) {
    res.innerHTML = '<span style="color:var(--muted);font-size:12px">No resources for this day.</span>';
    return;
  }
  res.innerHTML = day.resources.map(r =>
    `<a class="resource-link" href="${r.url}" target="_blank" rel="noopener">â†— ${r.title}</a>`
  ).join('');
}

function toggleSteps(idx) {
  const el = document.getElementById(`steps-${idx}`);
  const btn = el.previousElementSibling;
  const open = el.style.display === 'none';
  el.style.display = open ? 'block' : 'none';
  btn.textContent = open ? 'â–¼ How to do this' : 'â–¶ How to do this';
}

function closePanel() {
  activeDay = null;
  document.getElementById('day-panel').classList.add('hidden');
  document.querySelectorAll('.day-card').forEach(c => c.classList.remove('active'));
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Task toggling
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleTask(monthId, dayNum, taskIdx) {
  const key = getDayKey(monthId, dayNum);
  if (!progress.tasks[key]) progress.tasks[key] = {};
  progress.tasks[key][taskIdx] = !progress.tasks[key][taskIdx];
  saveProgress();

  const month = roadmap.months.find(m => m.id === monthId);
  const day = month.weeks.flatMap(w => w.days).find(d => d.day === dayNum);

  renderDayTasks(month, day);
  refreshDayCard(monthId, dayNum, month, day);
  updateGlobalStats();
  updateMonthNavItem(month);
  renderWhatsNext();
}

function refreshDayCard(monthId, dayNum, month, day) {
  const card = document.getElementById(`dc-${monthId}-${dayNum}`);
  if (!card) return;

  const complete = isDayComplete(day, monthId);
  const partial = isDayPartial(day, monthId);
  const doneCount = getDayCompletionCount(day, monthId);

  card.className = `day-card ${complete ? 'completed' : partial ? 'partial' : ''} active`;

  const dots = day.tasks.map((_, i) => {
    const saved = getDayProgress(monthId, dayNum);
    return `<span class="dot ${saved[i] ? 'done' : ''}"></span>`;
  }).join('');

  card.innerHTML = `
    ${complete ? '<span class="completed-check">âœ“</span>' : ''}
    <div class="day-num">Day ${day.day}</div>
    <div class="day-card-title">${day.title}</div>
    <div class="day-time">â± ${day.timeEstimate}</div>
    <div class="day-progress-dots">${dots}</div>`;

  // Update month header stats
  const stats = calcMonthStats(month);
  document.getElementById('month-pct-big').textContent = stats.pct + '%';
  document.getElementById('month-fill-big').style.width = stats.pct + '%';
}

function updateMonthNavItem(month) {
  const stats = calcMonthStats(month);
  const btn = document.getElementById('nav-m' + month.id);
  if (btn) {
    btn.querySelector('.month-pct').textContent = stats.pct + '%';
  }
}

function markDayComplete() {
  const month = roadmap.months.find(m => m.id === activeMonth);
  if (!month || !activeDay) return;
  const day = month.weeks.flatMap(w => w.days).find(d => d.day === activeDay);
  if (!day) return;

  const key = getDayKey(activeMonth, activeDay);
  if (!progress.tasks[key]) progress.tasks[key] = {};
  day.tasks.forEach((_, i) => { progress.tasks[key][i] = true; });
  saveProgress();

  renderDayTasks(month, day);
  refreshDayCard(activeMonth, activeDay, month, day);
  updateGlobalStats();
  updateMonthNavItem(month);
  renderWhatsNext();
}

function clearDay() {
  if (!activeDay) return;
  const key = getDayKey(activeMonth, activeDay);
  delete progress.tasks[key];
  saveProgress();

  const month = roadmap.months.find(m => m.id === activeMonth);
  const day = month.weeks.flatMap(w => w.days).find(d => d.day === activeDay);

  renderDayTasks(month, day);
  refreshDayCard(activeMonth, activeDay, month, day);
  updateGlobalStats();
  updateMonthNavItem(month);
  renderWhatsNext();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Notes
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let noteTimer = null;
function saveNote() {
  clearTimeout(noteTimer);
  noteTimer = setTimeout(() => {
    if (!activeDay) return;
    const key = getDayKey(activeMonth, activeDay);
    const val = document.getElementById('dp-notes').value;
    if (val.trim()) {
      progress.notes[key] = val;
    } else {
      delete progress.notes[key];
    }
    saveProgress();
  }, 800);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Export / Import
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function exportProgress() {
  const json = JSON.stringify(progress, null, 2);
  const blob = new Blob([json], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `ai_roadmap_progress_${new Date().toISOString().slice(0,10)}.json`;
  a.click();
  URL.revokeObjectURL(url);
}

function showImportModal() {
  document.getElementById('import-modal').classList.remove('hidden');
}

function closeImportModal() {
  document.getElementById('import-modal').classList.add('hidden');
}

function importProgress() {
  try {
    const raw = document.getElementById('import-text').value;
    const imported = JSON.parse(raw);
    if (!imported.tasks) throw new Error('Invalid format');
    progress = imported;
    saveProgress();
    closeImportModal();
    buildSidebar();
    renderMonth(activeMonth);
    alert('Progress imported successfully!');
  } catch (e) {
    alert('Import failed: ' + e.message);
  }
}

function resetConfirm() {
  if (confirm('Reset ALL progress? This cannot be undone.')) {
    progress = { version: 1, tasks: {}, notes: {}, lastUpdated: null };
    saveProgress();
    closePanel();
    buildSidebar();
    renderMonth(activeMonth);
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Mobile sidebar
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
}

// Close sidebar when clicking outside (mobile)
document.addEventListener('click', e => {
  const sidebar = document.getElementById('sidebar');
  const hamburger = document.querySelector('.hamburger');
  if (window.innerWidth <= 768
      && sidebar.classList.contains('open')
      && !sidebar.contains(e.target)
      && e.target !== hamburger) {
    sidebar.classList.remove('open');
  }
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Keyboard shortcuts
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') {
    closePanel();
    document.getElementById('import-modal').classList.add('hidden');
  }
  if (e.key === 'ArrowRight' && e.altKey) {
    const next = Math.min(activeMonth + 1, roadmap?.months.length || 6);
    selectMonth(next);
  }
  if (e.key === 'ArrowLeft' && e.altKey) {
    const prev = Math.max(activeMonth - 1, 1);
    selectMonth(prev);
  }
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Start
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
init();
</script>
</body>
</html>
